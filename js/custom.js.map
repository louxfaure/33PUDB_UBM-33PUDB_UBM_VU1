{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/33PUDB_UBM-33PUDB_UBM_VU1/js/main.js","primo-explore/custom/33PUDB_UBM-33PUDB_UBM_VU1/js/prmBriefResultContainerAfter/linkToExternalSearchSystem.js","primo-explore/custom/33PUDB_UBM-33PUDB_UBM_VU1/js/prmFullViewServiceContainerAfter/afficheMessageReserve.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_linkToExternalSearchSystem","_afficheMessageReserve","app","angular","component","linkToExternalSearchSystemConfig","afficheMessageReserveConfig","linkToExternalSearchSystemController","$scope","$window","_classCallCheck","this","$onInit","console","log","showExternalSiteList","detectLanguage","parentCtrl","jwtUtilService","storageUtil","localStorage","getItem","undefined","setItem","queryTerm","encodeURIComponent","searchService","searchFieldsService","_mainSearch","URLSearchParams","location","search","get","titleText","contentText","$inject","bindings","controller","template","afficheMessageReserveController","$element","inReserve","$parent","$ctrl","item","delivery","holding","forEach","subLocationCode","innerHTML"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,gBCMA,IAAAK,EAAAX,EAAA,6DACAY,EAAAZ,EAAA,4DALIa,EAAMC,QAAQJ,OAAO,aAAc,CAAC,gBAQpCG,IACFA,EAAIE,UAAU,2BAA4BJ,EAAAK,kCAC1CH,EAAIE,UAAU,0BAA2BH,EAAAK,2eCVrCC,aACF,SAAAA,EAAYC,EAAQC,gGAAQC,CAAAC,KAAAJ,GAC1BI,KAAKC,QAAU,WACbD,KAAKF,QAAUA,EACfI,QAAQC,IAAI,oDACZD,QAAQC,IAAI,oBAAoBH,KAAKI,sBACrCJ,KAAKK,iBACgG,SAAjGL,KAAKM,WAAWC,eAAeC,YAAYC,aAAaC,QAAQ,mCAA4IC,IAAjGX,KAAKM,WAAWC,eAAeC,YAAYC,aAAaC,QAAQ,+BAC5KV,KAAKI,sBAAuB,EAC5BJ,KAAKM,WAAWC,eAAeC,YAAYC,aAAaG,QAAQ,4BAA4B,SAG/Ff,EAAOgB,UAAYC,mBAAmBd,KAAKM,WAAWS,cAAcC,oBAAoBC,iEAU1F,OAJkB,IAAIC,gBAAgBlB,KAAKF,QAAQqB,SAASC,QACrCC,IAAI,SAAW,MAIpC,IAAK,KACHrB,KAAKsB,UAAY,yDACjBtB,KAAKuB,YAAc,uFACnB,MACF,IAAK,KACHvB,KAAKsB,UAAY,qDACjBtB,KAAKuB,YAAc,4FACnB,MACF,QACEvB,KAAKsB,UAAY,mEACjBtB,KAAKuB,YAAc,sJAMvBvB,KAAKI,sBAAuB,EAC5BJ,KAAKM,WAAWC,eAAeC,YAAYC,aAAaG,QAAQ,4BAA4B,kBAIhGhB,EAAqC4B,QAAU,CAAC,SAAU,WAC/CxC,EAAAU,iCAAmC,CAC5C+B,SAAU,CAACnB,WAAW,KACtBoB,WAAY9B,EACZ+B,07DClDEC,EACJ,SAAAA,EAAYC,EAAUhC,gGAAQE,CAAAC,KAAA4B,GAC5B,IAAIE,GAAY,EAShB,GARA5B,QAAQC,IAAI,KAAO2B,GAEnBjC,EAAOkC,QAAQA,QAAQC,MAAMC,KAAKC,SAASC,QAAQC,QAAQ,SAACD,GAC3B,cAA3BA,EAAQE,kBACVP,GAAY,MAIE,IAAdA,EAGF,OAFA5B,QAAQC,IAAI,yBACZ0B,EAAS,GAAGS,UAAY,qeACjB,MAKbV,EAAgCJ,QAAU,CAAC,WAAY,UAE5CxC,EAAAW,4BAA8B,CACvC8B,SAAU,CAACnB,WAAW,KACtBoB,WAAYE","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\n\nlet app = angular.module('viewCustom', ['angularLoad']);\n\n\n\nimport { linkToExternalSearchSystemConfig } from './prmBriefResultContainerAfter/linkToExternalSearchSystem'\nimport { afficheMessageReserveConfig } from './prmFullViewServiceContainerAfter/afficheMessageReserve';\n// import { messagePrimoConfig } from './prmSearchBarAfter/messagePrimo';\n\nif (app) {\n  app.component('prmSearchResultListAfter', linkToExternalSearchSystemConfig);\n  app.component('prmRequestServicesAfter', afficheMessageReserveConfig);\n  // app.component('prmSearchBarAfter', messagePrimoConfig);\n\n} \n","import linkToExternalSearchSystem from './linkExternalSiteResultList.html'\n\nclass linkToExternalSearchSystemController {\n    constructor($scope, $window){\n      this.$onInit = function () {\n        this.$window = $window;\n        console.log('linkToExternalSearchSystemController initialized');\n        console.log('Affiche message :',this.showExternalSiteList)\n        this.detectLanguage(); // Détecte la langue au chargement\n        if (this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem('viewExternalSearchMessage') === 'true' || this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem('viewExternalSearchMessage') !== undefined) {\n           this.showExternalSiteList = true;\n           this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem('viewExternalSearchMessage','true');\n        }\n       \n        $scope.queryTerm = encodeURIComponent(this.parentCtrl.searchService.searchFieldsService._mainSearch);\n      }\n    }\n\n    // Méthode pour détecter la langue et définir le texte\n    detectLanguage() {\n      const urlParams = new URLSearchParams(this.$window.location.search);\n      const lang = urlParams.get('lang') || 'fr'; // Définit 'fr' par défaut si lang est null\n\n      // Définit les textes en fonction de la langue\n      switch (lang) {\n        case 'en':\n          this.titleText = \"Can't find the document you're looking for in Babord+?\";\n          this.contentText = \"Feel free to retry your search on the following sites to broaden your possibilities:\";\n          break;\n        case 'es':\n          this.titleText = \"¿No encuentras el documento que buscas en Babord+?\";\n          this.contentText = \"No dudes en relanzar tu búsqueda en los siguientes sitios para ampliar las posibilidades:\";\n          break;\n        default:\n          this.titleText = \"Vous ne trouvez pas le document que vous cherchez dans Babord+ ?\";\n          this.contentText = \"N'hésitez pas à relancer votre recherche sur les sites suivants pour élargir les possibilités :\";\n          break;\n      }\n    }\n\n    externalSearchMsgOnClick (){\n      this.showExternalSiteList = false;\n      this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem('viewExternalSearchMessage','false');\n    };\n  }\n\n  linkToExternalSearchSystemController.$inject = ['$scope', '$window']\n  export let linkToExternalSearchSystemConfig = {\n    bindings: {parentCtrl:'<'},\n    controller: linkToExternalSearchSystemController,\n    template:  linkToExternalSearchSystem,\n  }","class afficheMessageReserveController {\n  constructor($element, $scope) {\n    var inReserve = false;\n    console.log(\"A \" + inReserve);\n\n    $scope.$parent.$parent.$ctrl.item.delivery.holding.forEach((holding) => {\n      if (holding.subLocationCode == \"3100400111\") {\n        inReserve = true;\n      }\n    });\n\n    if (inReserve === true) {\n      console.log(\"Ajout message réserve\");\n      $element[0].innerHTML = '<div id=\"alerteReserve\">Document patrimonial dont la communication est soumise à une validation préalable par les bibliothécaires. Merci de vous adresser à un bureau de prêt ou de nous contacter pour valider votre réservation.<br/><div class=\"right\" style=\"margin-top:0.5em\">➡️&nbsp;<a href=\"https://www.u-bordeaux-montaigne.fr/fr/documentation/collections-patrimoniales/collections-patrimoniales-imprimees-de-l-universite.html\">Plus d\\'informations sur notre site.</a></span></div>';\n      return null;\n    }\n  }\n}\n\nafficheMessageReserveController.$inject = ['$element', '$scope'];\n\nexport let afficheMessageReserveConfig = {\n  bindings: {parentCtrl:'<'},\n  controller: afficheMessageReserveController,\n}"],"sourceRoot":"/source/"}